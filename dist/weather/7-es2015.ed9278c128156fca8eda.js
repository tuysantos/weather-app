(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{h7uI:function(t,a,r){"use strict";r.r(a),r.d(a,"WeatherComparationModule",(function(){return P}));var i=r("ofXK"),o=r("tyNb"),e=r("XNiG"),n=r("pLZG"),c=r("1G5W"),s=r("Na/C"),d=r("fXoL"),m=r("NFeN"),p=r("jhN1"),l=r("lqZU"),h=r("dNgK"),b=r("sjoS"),g=r("bTqV"),u=r("R1ws"),f=r("FKr1");const x=["*",[["mat-card-footer"]]],w=["*","mat-card-footer"];let y=(()=>{class t{constructor(t){this._animationMode=t}}return t.\u0275fac=function(a){return new(a||t)(d.Jb(u.a,8))},t.\u0275cmp=d.Db({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,a){2&t&&d.Bb("_mat-animation-noopable","NoopAnimations"===a._animationMode)},exportAs:["matCard"],ngContentSelectors:w,decls:2,vars:0,template:function(t,a){1&t&&(d.cc(x),d.bc(0),d.bc(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),t})(),k=(()=>{class t{}return t.\u0275mod=d.Hb({type:t}),t.\u0275inj=d.Gb({factory:function(a){return new(a||t)},imports:[[f.c],f.c]}),t})();var v=r("DgpY"),O=r("Xa2L");function F(t,a){1&t&&(d.Ob(0,"span"),d.rc(1,"Maximum Temperature for each day Highlighted (vertical comparation between places)"),d.Nb())}const S=function(t){return{display:t}};function _(t,a){if(1&t){const t=d.Pb();d.Ob(0,"div",5),d.Ob(1,"button",6),d.Wb("click",(function(){return d.ic(t),d.ac().removeAllItems()})),d.rc(2,"Remove all comparation"),d.Nb(),d.Ob(3,"button",6),d.Wb("click",(function(){return d.ic(t),d.ac().sortForecast()})),d.rc(4,"Sort forecast "),d.Kb(5,"mat-icon",7),d.Kb(6,"mat-icon",8),d.Nb(),d.Ob(7,"button",9),d.Wb("click",(function(){return d.ic(t),d.ac().goBack()})),d.rc(8,"Back"),d.Nb(),d.qc(9,F,2,0,"span",10),d.Nb()}if(2&t){const t=d.ac();d.zb(5),d.dc("ngStyle",d.fc(3,S,t.isSortDesc?"none":"")),d.zb(1),d.dc("ngStyle",d.fc(5,S,t.isSortDesc?"":"none")),d.zb(3),d.dc("ngIf",t.checkForMax)}}function M(t,a){if(1&t&&(d.Ob(0,"mat-card",13),d.Kb(1,"app-weather-forecast-container",14),d.Nb()),2&t){const t=a.$implicit,r=d.ac(2);d.zb(1),d.dc("location",t)("maxWeatherForecats",r.maxWeatherForecats)("checkForMax",r.checkForMax)}}function I(t,a){if(1&t&&(d.Ob(0,"div",11),d.qc(1,M,2,3,"mat-card",12),d.Nb()),2&t){const t=d.ac();d.zb(1),d.dc("ngForOf",t.comparationList)}}function N(t,a){1&t&&d.Kb(0,"mat-spinner",15),2&t&&d.dc("diameter",50)("strokeWidth",2)}const j=[{path:"",component:(()=>{class t{constructor(t,a,r,i,o){this.comparationFacade=r,this.snackBar=i,this.sorterService=o,this.apiState=s.a.Init,this.destroy$=new e.a,this.count=0,this.comparationList=[],this.iMaxIndex=[],this.maxWeatherForecats=[],this.checkForMax=!1,this.isSortDesc=!0,t.addSvgIcon("arrow_down",a.bypassSecurityTrustResourceUrl("assets/img/arrow_down.svg")),t.addSvgIcon("arrow_up",a.bypassSecurityTrustResourceUrl("assets/img/arrow_up.svg"))}ngOnInit(){this.comparationFacade.comparation$.pipe(Object(n.a)(t=>!!t),Object(c.a)(this.destroy$)).subscribe(t=>{this.comparationList=t},t=>{this.openSnackBar(t.message,"Error")}),this.comparationFacade.apiState$.pipe(Object(n.a)(t=>!!t),Object(c.a)(this.destroy$)).subscribe(t=>{this.apiState=t,t===s.a.Done&&this.sortComparationList()},t=>{this.openSnackBar(t.message,"Error")}),this.comparationFacade.count$.pipe(Object(n.a)(t=>!!t),Object(c.a)(this.destroy$)).subscribe(t=>{this.count=t})}sortComparationList(){const t=[];let a=0,r=0;this.comparationList.forEach(a=>{t.push({id:a.woeid,consolidated_weather:a.consolidated_weather})});const i=[...t];if(i&&i.length>0){const o=i[0].consolidated_weather.length;let e=0;for(let i=0;i<o;i++){for(let i=0;i<t.length;i++){const o=Math.round(t[i].consolidated_weather[a].max_temp);0===i?e=o:(e<o&&(r=i),e=e>o?e:o)}this.iMaxIndex.push(r),r=0,a++}this.maxTempForecast()}}maxTempForecast(){if(this.comparationList.length>0){this.checkForMax=this.comparationList.length>1;const t=this.comparationList[0].consolidated_weather.length;for(let a=0;a<t;a++){const t=this.iMaxIndex[a];this.comparationList[t]&&this.maxWeatherForecats.push(this.comparationList[t].consolidated_weather[a])}}}removeItem(t){this.comparationFacade.removeFromComparation(t)}removeAllItems(){this.comparationFacade.removeAllFromComparation(),window.history.back()}goBack(){window.history.back()}sortForecast(){this.isSortDesc=!this.isSortDesc;const t=[],a=this.isSortDesc?-1:1;this.comparationList.forEach(r=>{const i=Object.assign(Object.assign({},r),{consolidated_weather:this.sorterService.sortBy(r.consolidated_weather,"applicable_date",a)});t.push(i)}),this.comparationList=[...t]}openSnackBar(t,a){this.snackBar.open(t,a,{duration:2e3})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return t.\u0275fac=function(a){return new(a||t)(d.Jb(m.c),d.Jb(p.b),d.Jb(l.a),d.Jb(h.a),d.Jb(b.a))},t.\u0275cmp=d.Db({type:t,selectors:[["app-weather-comparation"]],decls:5,vars:3,consts:[["class","comparation-back-btn",4,"ngIf"],[1,"comparation-container"],["class","card-wrapper",4,"ngIf"],[1,"spinner-loader"],["color","accent",3,"diameter","strokeWidth",4,"ngIf"],[1,"comparation-back-btn"],["mat-raised-button","","color","warn",3,"click"],["svgIcon","arrow_down","aria-hidden","false","aria-label","sort desc",3,"ngStyle"],["svgIcon","arrow_up","aria-hidden","false","aria-label","sort asc",3,"ngStyle"],["mat-raised-button","","color","primary",3,"click"],[4,"ngIf"],[1,"card-wrapper"],["class","card-container",4,"ngFor","ngForOf"],[1,"card-container"],[3,"location","maxWeatherForecats","checkForMax"],["color","accent",3,"diameter","strokeWidth"]],template:function(t,a){1&t&&(d.qc(0,_,10,7,"div",0),d.Ob(1,"div",1),d.qc(2,I,2,1,"div",2),d.Ob(3,"div",3),d.qc(4,N,1,2,"mat-spinner",4),d.Nb(),d.Nb()),2&t&&(d.dc("ngIf","Done"===a.apiState||"Error"===a.apiState),d.zb(2),d.dc("ngIf","Done"===a.apiState),d.zb(2),d.dc("ngIf","Done"!==a.apiState))},directives:[i.j,g.a,m.a,i.k,i.i,y,v.a,O.b],styles:[".comparation-container[_ngcontent-%COMP%]{text-align:center;margin-left:auto;margin-right:auto;width:90%}.comparation-container[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]{text-align:left}.comparation-container[_ngcontent-%COMP%]   .card-wrapper[_ngcontent-%COMP%]   .card-container[_ngcontent-%COMP%]{border:1px solid;margin-bottom:20px}.comparation-back-btn[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:20px;margin-left:40px}.comparation-back-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:20px}"]}),t})()}];let C=(()=>{class t{}return t.\u0275mod=d.Hb({type:t}),t.\u0275inj=d.Gb({factory:function(a){return new(a||t)},imports:[[o.c.forChild(j)],o.c]}),t})();var L=r("l7P3"),D=r("9jGm"),W=r("/yhu"),z=r("NccN"),B=r("OhnZ");let P=(()=>{class t{}return t.\u0275mod=d.Hb({type:t}),t.\u0275inj=d.Gb({factory:function(a){return new(a||t)},imports:[[i.b,C,O.a,k,g.b,B.a,m.b,h.b,L.d.forFeature(W.a.featureSelectorKey,W.b),D.c.forFeature([z.a])]]}),t})()}}]);